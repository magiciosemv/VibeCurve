#!/bin/bash

# VibeCurve æ ¸å¿ƒåŠŸèƒ½æµ‹è¯• - ä¸€é”®è¿è¡Œè„šæœ¬

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘           VibeCurve æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•å¥—ä»¶                             â•‘"
echo "â•‘           è¿è¡Œ 5 ä¸ªæ ¸å¿ƒåŠŸèƒ½æµ‹è¯•                                  â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

# æ£€æŸ¥ä¾èµ–
if ! command -v npx &> /dev/null; then
    echo "âŒ é”™è¯¯: npx æœªå®‰è£…"
    echo "è¯·å…ˆå®‰è£… Node.js: npm install"
    exit 1
fi

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
echo "ğŸš€ å¼€å§‹è¿è¡Œæ‰€æœ‰æµ‹è¯•..."
echo ""

npx ts-node tests/run-all-tests.ts

# æ£€æŸ¥ç»“æœ
if [ $? -eq 0 ]; then
    echo ""
    echo "âœ… æ‰€æœ‰æµ‹è¯•å®Œæˆï¼"
    echo ""
    echo "ğŸ“„ æŸ¥çœ‹è¯¦ç»†æŠ¥å‘Š:"
    echo "   cat logs/test-report-*.md"
    echo ""
else
    echo ""
    echo "âš ï¸  éƒ¨åˆ†æµ‹è¯•å¤±è´¥ï¼Œè¯·æŸ¥çœ‹æ—¥å¿—"
    echo ""
fi
